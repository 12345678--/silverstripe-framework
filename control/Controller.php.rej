***************
*** 72,82 ****
  		if($this->basicAuthEnabled) BasicAuth::protect_site_if_necessary();
  
  		// Directly access the session variable just in case the Group or Member tables don't yet exist
- 		if(Session::get('loggedInAs') && Security::database_is_ready()) {
- 			$member = Member::currentUser();
- 			if($member) {
- 				DB::query("UPDATE \"Member\" SET \"LastVisited\" = " . DB::getConn()->now()
- 					. " WHERE \"ID\" = $member->ID", null);
  			}
  		}
  		
--- 79,91 ----
  		if($this->basicAuthEnabled) BasicAuth::protect_site_if_necessary();
  
  		// Directly access the session variable just in case the Group or Member tables don't yet exist
+ 		if($this->config()->log_last_visited) {
+ 			if(Session::get('loggedInAs') && Security::database_is_ready()) {
+ 				$member = Member::currentUser();
+ 				if($member) {
+ 					DB::query("UPDATE \"Member\" SET \"LastVisited\" = " . DB::getConn()->now()
+ 						. " WHERE \"ID\" = $member->ID", null);
+ 				}
  			}
  		}
  		
